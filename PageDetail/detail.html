<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Détails - STREAMFLIX</title>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@500;600;700&family=Plus+Jakarta+Sans:wght@600;700&family=Manrope:wght@600;700&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="../style.css">
  <link rel="stylesheet" href="detail.css">
</head>
<body>

  <!-- ========================================
       HEADER & NAVIGATION
       ======================================== -->
  <header class="header">
    <nav class="nav">
      <button class="menu-toggle" aria-label="Menu" id="menuToggle">
        <span></span>
        <span></span>
        <span></span>
      </button>
      
      <div class="brand" onclick="window.location.href='../index.html'">STREAMFLIX</div>
      
      <div class="navlinks" id="navLinks">
        <a href="../index.html#accueil">Accueil</a>
        <a href="../index.html#series">Séries</a>
        <a href="../index.html#films">Films</a>
      </div>
      
      <div class="spacer"></div>
      
      <div class="search-container">
        <form class="search-bar" onsubmit="return false;">
          <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input id="searchInput" type="text" placeholder="Recherchez des films, séries, animés .." aria-label="Rechercher un film ou une série" autocomplete="off">
        </form>
        <div id="searchSuggestions" class="search-suggestions" style="display: none;"></div>
      </div>
    </nav>
  </header>

  <!-- ========================================
       PAGE DE DÉTAILS
       ======================================== -->
  <div class="detail-page">
    
    <div class="detail-background">
      <img id="detailBackgroundImage" src="" alt="" style="display: none;">
    </div>
    
    <div class="detail-content">
      <div class="detail-main">
        <div class="detail-poster">
          <img id="detailPoster" src="" alt="Poster">
        </div>
        
        <div class="detail-info">
          <h1 id="detailTitle" class="detail-title"></h1>
          <p id="detailType" class="detail-type"></p>
          
          <div class="detail-rating">
            <span id="detailRating" class="detail-rating-value"></span>
            <div class="detail-stars" id="detailStars"></div>
            <span id="detailRatingBadge" class="detail-rating-badge"></span>
          </div>
          
          <p id="detailDuration" class="detail-duration"></p>
          
          <div class="detail-genres" id="detailGenres"></div>
          
          <p id="detailSynopsis" class="detail-synopsis"></p>
          
          <div class="detail-actions">
            <button class="detail-btn detail-btn-play">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z"/>
              </svg>
              <span>Lecture</span>
            </button>
            <button class="detail-btn detail-btn-wishlist">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
              </svg>
              <span>Ma liste</span>
            </button>
            <button class="detail-btn detail-btn-download">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              <span>Télécharger</span>
            </button>
          </div>
          
          <div class="detail-user-rating">
            <span>Votre note</span>
            <div class="detail-stars-input" id="detailStarsInput"></div>
          </div>
        </div>
      </div>
      
      <div class="detail-about">
        <div class="detail-about-divider">
          <span>— À propos —</span>
        </div>
        
        <div class="detail-about-content">
          <div class="detail-about-video">
            <div class="detail-about-video-placeholder">
              <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z"/>
              </svg>
            </div>
          </div>
          
          <div class="detail-about-info">
            <div class="detail-about-section">
              <h3>Résumé</h3>
              <p id="detailAboutSummary"></p>
            </div>
            
            <div class="detail-about-section">
              <h3>Créateur</h3>
              <p id="detailCreator"></p>
            </div>
            
            <div class="detail-about-section">
              <h3>Distribution</h3>
              <p id="detailCast"></p>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Section Films de saga / Similaires -->
      <div class="detail-similar-section">
        <h2 id="similarSectionTitle" class="detail-similar-title"></h2>
        <div class="detail-similar-row" id="similarMoviesRow"></div>
      </div>
    </div>
  </div>

  <!-- ========================================
       SCRIPTS
       ======================================== -->
  <script src="detail.js"></script>
  <script>
    // Gérer la recherche dans la page de détails
    document.addEventListener('DOMContentLoaded', () => {
      const searchForm = document.querySelector('.search-bar');
      const searchInput = document.getElementById('searchInput');
      const searchBtn = document.querySelector('.search-btn');
      
      function redirectToSearch(query){
        if(query && query.trim().length >= 2){
          hideSuggestions();
          window.location.href = `../PageRecherche/search.html?q=${encodeURIComponent(query.trim())}`;
        }
      }
      
      if(searchForm && searchInput){
        searchForm.addEventListener('submit', (e) => {
          e.preventDefault();
          redirectToSearch(searchInput.value);
        });
        
        if(searchBtn){
          searchBtn.addEventListener('click', (e) => {
            e.preventDefault();
            redirectToSearch(searchInput.value);
          });
        }
        
        searchInput.addEventListener('keydown', (e) => {
          if(e.key === 'Enter'){
            e.preventDefault();
            redirectToSearch(searchInput.value);
          } else if(e.key === 'Escape'){
            hideSuggestions();
            searchInput.blur();
          }
        });
        
        // Suggestions en temps réel avec debounce
        searchInput.addEventListener('input', (e) => {
          const query = e.target.value.trim();
          
          // Annuler la recherche précédente
          if(searchSuggestionsTimeout){
            clearTimeout(searchSuggestionsTimeout);
          }
          
          if(query.length >= 2){
            // Afficher les suggestions (300ms après la dernière frappe)
            searchSuggestionsTimeout = setTimeout(() => {
              searchSuggestions(query);
            }, 300);
          } else {
            hideSuggestions();
          }
        });
        
        // Cacher les suggestions quand on clique ailleurs
        document.addEventListener('click', (e) => {
          const searchContainer = document.querySelector('.search-container');
          if(searchContainer && !searchContainer.contains(e.target)){
            hideSuggestions();
          }
        });
      }
    });
  </script>
</body>
</html>

